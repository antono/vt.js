!!! 5
%head
  %title TTY Player
  %link{ style: '../css/sgr.css' }
  %link{ style: '../css/player.css' }
  %script{ src: '../lib/parser.js' }
  %script{ src: '../lib/jsdeferred.js' }
  %script{ src: '../lib/term.js' }
  %script{ src: '../lib/transitions.js' }
  %script{ src: '../lib/canvas.js' }
  %script{ src: '../lib/player.js' }

%body
  #player.sgr
    .header
      %img{ src: '/images/term/buttons.png'}
      %h1= @record.title
    .container
    %nav.controls
      %li.sc-button.toggle{ :'data-action' => 'play' }
        %img{ src: '/images/term/playback-start.png' }
      %li.sc-button{ :'data-action' => 'settings' }
        %img{ src: '/images/term/properties.png' }
        %ul.sc-settings
          %li Play in Your terminal
          - if @record.editable_by?(current_user)
            %li= link_to 'edit', edit_record_path(@record), method: 'get'
            %li= link_to 'destroy', @record, method: 'delete', confirm: 'Really Destroy?'
      -#  %input.speed{ type: 'range', value: 0 }
      %li.progress
        .progress-inner

  :javascript
    var onLoad = function() {
      var term = new Term(document.getElementsByClassName('container')[0]);
      window.player = new SC.Player(document.getElementById('player'), term);
      window.player.load('#{record_path(@record.id, :format => :json)}');
    }
    window.addEventListener('load', onLoad, true);
